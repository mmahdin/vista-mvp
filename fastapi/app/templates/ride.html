{% extends "base.html" %}

{% block head %}
<style>
    #map {
        height: 400px;
        border-radius: 15px;
        background: #f0f2f5;
    }
    
    .driver-card {
        transition: all 0.3s ease;
    }
    
    .driver-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
</style>
{% endblock %}

{% block content %}
<div class="ride-container">
    <div class="row">
        <div class="col-lg-7">
            <div class="card mb-4">
                <div class="card-header bg-white">
                    <h4 class="mb-0">Request a Ride</h4>
                </div>
                <div class="card-body">
                    <form id="ride-form" action="/request-ride" method="post">
                        <div class="mb-3">
                            <label class="form-label">Pickup Location</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fa-solid fa-location-dot"></i></span>
                                <input type="text" name="start_location" class="form-control" placeholder="Current location" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Destination</label>
                            <div class="input-group">
                                <span class="input-group-text"><i class="fa-solid fa-flag"></i></span>
                                <input type="text" name="end_location" class="form-control" placeholder="Where to?" required>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="form-label">Ride Type</label>
                            <div class="d-flex flex-wrap gap-2">
                                <input type="radio" class="btn-check" name="ride_type" id="standard" value="standard" autocomplete="off" checked>
                                <label class="btn btn-outline-primary" for="standard">
                                    <i class="fa-solid fa-car me-2"></i> Standard
                                </label>
                                
                                <input type="radio" class="btn-check" name="ride_type" id="premium" value="premium" autocomplete="off">
                                <label class="btn btn-outline-primary" for="premium">
                                    <i class="fa-solid fa-gem me-2"></i> Premium
                                </label>
                                
                                <input type="radio" class="btn-check" name="ride_type" id="group" value="group" autocomplete="off">
                                <label class="btn btn-outline-primary" for="group">
                                    <i class="fa-solid fa-users me-2"></i> Group
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 py-3 fw-bold">
                            <i class="fa-solid fa-bolt me-2"></i> Request Ride
                        </button>
                    </form>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header bg-white">
                    <h4 class="mb-0">Available Drivers</h4>
                </div>
                <div class="card-body">
                    <div class="driver-list">
                        <div class="driver-card card mb-3">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="driver-avatar me-3">
                                        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <span class="fw-bold">JD</span>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h5 class="mb-0">John Doe</h5>
                                        <div class="d-flex align-items-center mb-1">
                                            <span class="text-warning me-1">
                                                <i class="fa-solid fa-star"></i> 4.92
                                            </span>
                                            <span class="text-muted mx-2">•</span>
                                            <span>256 rides</span>
                                        </div>
                                        <div class="text-muted">
                                            <i class="fa-solid fa-car me-1"></i> Toyota Prius • ABC123
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">5 min</div>
                                        <small class="text-muted">away</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="driver-card card mb-3">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="driver-avatar me-3">
                                        <div class="rounded-circle bg-success text-white d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <span class="fw-bold">MS</span>
                                        </div>
                                    </div>
                                    <div class="flex-grow-1">
                                        <h5 class="mb-0">Maria Smith</h5>
                                        <div class="d-flex align-items-center mb-1">
                                            <span class="text-warning me-1">
                                                <i class="fa-solid fa-star"></i> 4.89
                                            </span>
                                            <span class="text-muted mx-2">•</span>
                                            <span>187 rides</span>
                                        </div>
                                        <div class="text-muted">
                                            <i class="fa-solid fa-car me-1"></i> Honda Civic • XYZ789
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">7 min</div>
                                        <small class="text-muted">away</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-5">
            <div class="card sticky-top" style="top: 20px;">
                <div class="card-header bg-white">
                    <h4 class="mb-0">Your Route</h4>
                </div>
                <div class="card-body p-0">
                    <div id="map"></div>
                    <div class="p-4">
                        <div class="d-flex justify-content-between mb-3">
                            <div>
                                <h6>Estimated Price</h6>
                                <h4 class="text-success">$15 - $20</h4>
                            </div>
                            <div>
                                <h6>Distance</h6>
                                <h4>4.2 mi</h4>
                            </div>
                            <div>
                                <h6>Duration</h6>
                                <h4>12 min</h4>
                            </div>
                        </div>
                        <div class="alert alert-info">
                            <i class="fa-solid fa-info-circle me-2"></i> Prices may vary based on demand
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Simple map placeholder with route visualization
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize map
        const mapEl = document.getElementById('map');
        mapEl.innerHTML = `
            <div class="d-flex flex-column align-items-center justify-content-center h-100 text-center">
                <i class="fa-solid fa-map-location-dot fa-3x text-primary mb-3"></i>
                <h4>Interactive Map</h4>
                <p class="text-muted">Your route would be displayed here</p>
            </div>
        `;
        
        // Form submission handling
        const rideForm = document.getElementById('ride-form');
        rideForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Ride request submitted! This would connect to backend in a real application.');
            // In a real app: 
            // 1. Collect form data
            // 2. Send to backend via fetch API
            // 3. Handle response
        });
    });
</script>
{% endblock %}